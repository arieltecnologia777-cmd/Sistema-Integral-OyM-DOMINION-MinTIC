<!doctype html>
<html lang="es" data-theme="light">
<head>
<script>
  (function(){
    try{
      if(!sessionStorage.getItem('auth_ok')){
        window.location.replace('login.html');
      }
    }catch(e){
      window.location.replace('login.html');
    }
  })();
</script>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
  <title>Seguimiento O&M — Fullscreen con Sidebar</title>
  <meta name="description" content="Héroe a pantalla completa con menú lateral fijo e interruptor de tema.">
  <style>
    :root{
      /* Tema base (Claro) */
      --bg:#f6f8fc; --panel:#ffffff; --text:#0f172a; --muted:#475569;
      --line:#dbe2f1; --primary:#2563eb; --accent:#f59e0b; --shadow:0 22px 48px rgba(15,23,42,.12);

      /* Sidebar */
      --sb-w: 260px;
      --sb-bg:#ffffff; 
      --sb-line:#dbe2f1;

      /* Hero (split) */
      --left:1.25fr;  /* imagen */
      --right:1fr;    /* texto */

      /* Letterbox blur (columna izquierda) */
      --lb-blur: 12px; 
      --lb-bright: 0.96; 
      --lb-opacity: 0.50; 
      --lb-scale: 1.08;
    }

    /* ===== Modo oscuro robusto ===== */
    html[data-theme="dark"],
    body.theme-dark{
      --bg:#0e1320; 
      --panel:#151a2e; 
      --text:#e5eaf5; 
      --muted:#9fb0c9; 
      --line:#24314f;
      --primary:#6ee7ff; 
      --accent:#ffd166; 
      --shadow:0 22px 48px rgba(0,0,0,.35);

      --sb-bg:#151a2e; 
      --sb-line:#24314f;
    }

    /* Ajuste para laptops (1366–1536) */
    @media (min-width: 1200px) and (max-width: 1536px){
      :root{ --sb-w: 240px; }
    }

    /* Reset/Global */
    *{box-sizing:border-box}
    html,body{height:100%; margin:0}
    body{
      color:var(--text); background:var(--bg);
      font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Helvetica,Arial;
      overflow:hidden; /* fullscreen */
    }
    a{color:var(--text); text-decoration:none}
    img{display:block; max-width:100%; height:auto}

    /* ======= SIDEBAR — Opción B (Tarjeta flotante sin desfasar el hero) ======= */
    .sidebar{
      position: fixed;
      inset: 0 auto 0 0;
      width: var(--sb-w);
      background: color-mix(in srgb, var(--sb-bg) 50%, transparent);
      border: 1px solid var(--sb-line);
      border-radius: 10px;
      margin: 5px;
      box-shadow:
        26px 0 75px rgba(15, 23, 42, 0.42),
        0 20px 55px rgba(15, 23, 42, 0.28),
        0 0 0 1.4px rgba(255, 255, 255, 0.55) inset,
        0 0 22px rgba(0, 102, 255, 0.28),
        0 0 44px rgba(0, 102, 255, 0.18);
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      padding: 14px 12px;
      display: flex; flex-direction: column; justify-content: space-between;
      z-index: 200;
    }

    .sb-brand{
      display:flex; align-items:center; gap:12px; padding:8px; border-radius:12px;
      background: var(--panel); border:1px solid var(--line); box-shadow: var(--shadow);
    }

    .sb-logo{
      width:72px; height:72px; flex:0 0 72px;
      border-radius:14px; background:#fff; border:1px solid var(--line);
      overflow:hidden; display:grid; place-items:center; padding:8px;
    }
    .sb-logo img{
      width:100%; height:100%;
      object-fit:contain; object-position:center;
      background:#fff; display:block;
      image-rendering:auto;
    }
    @media (min-width: 1200px) and (max-width: 1536px){ .sb-logo{ width:56px; height:56px; padding:6px } }
    @media (max-width: 960px){ .sb-logo{ width:44px; height:44px; padding:4px } }
    [data-theme="dark"] .sb-logo{ background:#fff; border-color: var(--line) }

    .sb-title{ display:flex; flex-direction:column; line-height:1.05 }
    .sb-title strong{ font-size:14px }
    .sb-title small{ color:var(--muted) }

    .sb-section-title{ margin:14px 8px 6px 8px; font-size:11px; letter-spacing:.25px; text-transform:uppercase; color:var(--muted) }

    .sb-nav{ display:flex; flex-direction:column; gap:6px; padding:0 4px }

    .sb-item{
      display:flex; align-items:center; gap:10px; padding:10px 12px;
      border-radius:12px; color:var(--text); background:transparent;
      border:1px solid transparent; transition: background .2s, border .2s, transform .06s;
    }
    .sb-item:hover{ background:rgba(37,99,235,.08); border-color: rgba(37,99,235,.18) }
    .sb-item:active{ transform: translateY(1px) }

    .sb-item svg{ width:18px; height:18px; display:block; color: var(--muted); }
    .sb-item svg *{ stroke-linecap: round; stroke-linejoin: round; vector-effect: non-scaling-stroke; }
    .sb-item svg path,
    .sb-item svg circle,
    .sb-item svg rect,
    .sb-item svg line,
    .sb-item svg polyline,
    .sb-item svg polygon{ stroke: currentColor; stroke-width:2; fill:none; }
    .sb-item svg .fill{ fill: currentColor; stroke:none }
    .sb-item:hover svg{ color: var(--primary); }

    .sb-footer{ display:flex; flex-direction:column; gap:10px; padding:0 4px }

    /* ===== Botón Cerrar sesión (misma lógica de tema que .btn-theme) ===== */
    .btn-logout{
      display:flex; align-items:center; gap:10px; padding:10px 12px;
      border-radius:12px;
      background: var(--panel);        /* cambia con el tema */
      border:1px solid var(--line);    /* cambia con el tema */
      color: var(--text);              /* cambia con el tema */
      cursor:pointer; 
      box-shadow: var(--shadow);       /* cambia con el tema */
      transition: background .2s ease, border .2s ease, transform .06s ease, color .2s ease;
    }
    .btn-logout:hover{
      background: rgba(37,99,235,.08);  /* igual a .sb-item:hover */
      border-color: rgba(37,99,235,.18);
    }
    .btn-logout:active{ transform: translateY(1px) }
    .btn-logout svg{ width:18px; height:18px; stroke: currentColor; fill:none; stroke-width:2 }

    /* Botón CAMBIAR TEMA (ya existente) */
    .btn-theme{
      display:flex; align-items:center; gap:10px; padding:10px 12px;
      border-radius:12px; border:1px solid var(--line); background:var(--panel); color:var(--text);
      cursor:pointer; box-shadow:var(--shadow)
    }

    /* Botón hamburguesa (móvil) */
    .menu-toggle{
      position: fixed; left:10px; top:10px; z-index:60;
      background:var(--panel); border:1px solid var(--line); color:var(--text);
      border-radius:10px; padding:10px; display:none; box-shadow:var(--shadow); cursor:pointer;
    }
    .menu-toggle svg{ width:20px; height:20px; stroke: currentColor; stroke-width:2; fill:none }
    @media (max-width: 960px){
      .menu-toggle{ display:inline-flex }
      .sidebar{ transform: translateX(-100%); transition: transform .25s ease; }
      body.sb-open .sidebar{ transform: translateX(0) }
    }

    /* ======= HERO FULLSCREEN ======= */
    .hero{
      position:fixed; inset:0 0 0 var(--sb-w);
      width: calc(100svw - var(--sb-w)); height: 100svh; min-height:100vh;
      background: linear-gradient(180deg, rgba(238,243,251,.6), transparent 65%);
      display:grid; grid-template-columns: var(--left) var(--right); align-items:stretch;
      overflow:hidden;
    }
    @media (max-width: 960px){ .hero{ inset:0; width:100svw } }

    .photo-side{
      position:relative; overflow:hidden; background:var(--panel);
      display:flex; align-items:center; justify-content:center;
    }
    .photo-side::before{
      content:""; position:absolute; inset:0;
      background-image: url("dominion.jpg");
      background-size: cover; background-position: center;
      filter: blur(var(--lb-blur)) brightness(var(--lb-bright));
      transform: scale(var(--lb-scale)); opacity: var(--lb-opacity);
    }
    .photo-wrap{ position:relative; z-index:1; width:100%; height:100%;
      display:flex; align-items:center; justify-content:center; }
    .photo-wrap img{ width:auto; height:auto; max-width:100%; max-height:100%;
      object-fit:contain; object-position:center; border:0; box-shadow:none; }

    .text-side{
      position:relative;
      padding: clamp(16px, 3.5vmin, 40px);
      display:flex; flex-direction:column;
      justify-content:space-between;
      background: transparent; border-left: none !important; overflow: auto;
      box-shadow: -28px 0 56px rgba(15,23,42,.14), 0 0 1px rgba(15,23,42,.04);
      scrollbar-gutter: stable both-edges;
    }
    .photo-side, .text-side{ min-height: 0; }
    html[data-theme="dark"] .text-side{ box-shadow: -28px 0 56px rgba(0,0,0,.35), 0 0 1px rgba(0,0,0,.18) }
    @media (max-width:960px){ .text-side{ border-top:none !important } }

    .hero-copy{ align-self:flex-start; padding-top: clamp(8px, 2vmin, 20px); }

    .super-title{
      display:flex; align-items:center; gap:10px;
      color:var(--muted); font-weight:700; letter-spacing:.35px;
      text-transform:uppercase; font-size:12px; margin-bottom:14px
    }
    .super-title .dot{width:9px;height:9px;border-radius:99px;background:var(--accent)}

    .title-main{ margin:0; font-size:clamp(32px, 4vw, 52px); font-weight:600; letter-spacing:.5px; line-height:1.05; color:var(--text) }
    .lead{ margin-top:12px; color:var(--muted); font-size:clamp(15px, 1.6vmin, 18px); max-width:62ch }

    .carousel-title{
      text-align:center; color: var(--muted); font-weight: 600;
      font-size: clamp(18px, 1.6vmin, 16px); letter-spacing: .2px;
      margin: 0 !important; transform: translateY(clamp(28px, 2.4vw, 46px));
      line-height: 1.1; pointer-events: none;
    }

    .hero-legal{
      position: absolute; left: 50%;
      bottom: clamp(8px, 2.4vmin, 20px);
      transform: translateX(-50%) translateZ(0); transform-origin: bottom center;
      z-index: 2; display: inline-flex; align-items: center; gap: 8px;
      white-space: nowrap; font-size: 12px; color: var(--muted);
      background: color-mix(in srgb, var(--panel) 82%, transparent);
      padding: 6px 10px; border: none; border-radius:10px; box-shadow: var(--shadow);
      backdrop-filter: blur(5px); -webkit-backdrop-filter: blur(5px);
    }
    @media (max-width: 960px){ .hero-legal{ left:10px; right:10px; transform:none !important; text-align:center; white-space:normal } }

    .text-side::-webkit-scrollbar{ width:10px }
    .text-side::-webkit-scrollbar-thumb{ background:var(--line); border-radius:8px }
    .text-side:hover::-webkit-scrollbar-thumb{ background:color-mix(in srgb, var(--muted) 40%, transparent) }

    /* ===== Backdrop fuerte (difumina TODO, incluso el sidebar) ===== */
    .modal-backdrop{
      position: fixed; inset:0;
      background: rgba(10,15,28,.72);
      display:none; align-items:center; justify-content:center;
      z-index: 400; /* sobre el sidebar (200) */
      backdrop-filter: blur(8px) saturate(110%);
      -webkit-backdrop-filter: blur(8px) saturate(110%);
    }
    .modal-backdrop.open{ display:flex }

    /* Viñeta de enfoque */
    .modal-backdrop.open::before{
      content:"";
      position:absolute; inset:0; pointer-events:none;
      background:
        radial-gradient(1200px 800px at 50% 50%, rgba(0,0,0,.28), transparent 58%),
        linear-gradient(0deg, rgba(0,0,0,.10), rgba(0,0,0,.10));
    }

    /* Base modal genérica */
    .modal{
      width:min(720px, calc(100vw - 32px)); max-height: min(82vh, 800px);
      background: var(--panel); color: var(--text);
      border:1px solid var(--line); border-radius:16px; box-shadow: var(--shadow);
      display:flex; flex-direction:column; overflow:hidden;
      transform: scale(0.995);
      transition: transform .25s ease;
    }
    .modal-backdrop.open .modal{ transform: scale(1) }

    .modal-header{ display:flex; align-items:center; justify-content:space-between; gap:12px; padding:14px 16px; }
    .modal-title{ display:flex; align-items:center; gap:10px; font-weight:600 }
    .modal-body{ padding:16px; overflow:auto; color: var(--text) }
    .modal-footer{ padding:10px 16px; border-top:1px solid var(--line); display:flex; justify-content:flex-end; gap:10px }
    .btn{ display:inline-flex; align-items:center; gap:8px; padding:10px 12px; border-radius:12px; border:1px solid var(--line); background:var(--panel); color:var(--text); cursor:pointer; box-shadow:var(--shadow) }
    .btn.primary{ background: var(--primary); color: #fff; border-color: transparent }
    .btn svg{ width:16px; height:16px; stroke: currentColor; fill:none; stroke-width:2 }

    .carousel{
      margin-top:87px; position:relative; background: transparent !important;
      border: none; border-radius: 12px; box-shadow: 0 12px 40px rgba(15,23,42,.18);
      padding: 0; overflow:hidden;
    }
    .carousel-track{
      position: relative; width: 100%;
      aspect-ratio: 21 / 9; min-height: clamp(150px, 20vmin, 320px); max-height: 340px;
      overflow: hidden; z-index: 1; background: transparent !important; border-radius: 12px;
    }
    .carousel-item{
      position:absolute; inset:0; opacity:0; transform: scale(1.02);
      filter: blur(10px) saturate(95%); transition: opacity .65s ease, filter .65s ease, transform .65s ease;
      border:none; overflow:hidden; pointer-events: none; background: transparent !important; border-radius: 12px;
    }
    .carousel-item::before{
      content:""; position:absolute; inset:-12%;
      background-image: var(--slide-img); background-size: cover; background-position: center;
      filter: blur(22px) saturate(105%) brightness(0.98); transform: scale(1.06); z-index:0;
    }
    .carousel-item.is-active{ opacity:1; transform: scale(1); filter: blur(0); pointer-events: auto }
    .carousel-item img{
      position:relative; z-index:1; width:100%; height:100%;
      object-fit: contain; object-position:center; display:block; background: transparent !important; border-radius: 12px;
    }

    .carousel-btn{
      position:absolute; top:50%; transform:translateY(-50%);
      width:36px; height:36px; border-radius:50%;
      display:grid; place-items:center;
      background: rgba(0,0,0,.35); border:none; color:#fff; cursor:pointer; z-index: 5; box-shadow:none;
      transition: background .2s ease, transform .08s ease;
      backdrop-filter: blur(2px); -webkit-backdrop-filter: blur(2px);
    }
    .carousel-btn:hover{ background: rgba(0,0,0,.5) }
    .carousel-btn:active{ transform: translateY(-50%) scale(.98) }
    .carousel-btn svg{ width:18px; height:18px; stroke: currentColor; fill:none; stroke-width:2 }
    .carousel-btn.prev{ left:12px } .carousel-btn.next{ right:12px }

    .carousel-empty{ color: var(--muted); padding:14px; text-align:center; font-size:14px; background: transparent }

    @media (max-width: 960px){
      .carousel-btn{ width:34px; height:34px }
      .carousel-track{ min-height: clamp(140px, 24vmin, 300px); max-height: 320px }
    }
    @media (prefers-reduced-motion: reduce){
      .carousel-item{ transition: opacity .2s linear; filter:none; transform:none }
    }

    @media (max-width: 1440px){
      .carousel{ margin-top: 56px; }
      .hero-copy{ padding-top: 8px; }
      .title-main{ font-size: clamp(30px, 3.4vw, 44px); }
      .super-title{ margin-bottom: 8px; }
      .lead{ margin-top: 8px; }
      .carousel-track{ max-height: 320px; }
    }
    @media (max-width: 1366px){
      .carousel{ margin-top: 72px; }
      .hero-copy{ padding-top: 6px; }
      .title-main{ font-size: clamp(28px, 3.2vw, 40px); }
      .lead{ margin-top: 6px; }
      .carousel-track{ max-height: 300px; }
    }
    @media (max-height: 800px) and (min-width: 1024px){
      .carousel{ margin-top: 48px; }
      .hero-copy{ padding-top: 4px; }
      .carousel-track{ max-height: 290px; }
    }

    /* ===================== FIX SOLO MÓVIL (≤960px): HERO ===================== */
    @media (max-width: 960px){

      /* Apilar: foto arriba, texto abajo; cubrir ancho completo */
      .hero{
        inset: 0;
        width: 100svw;
        min-height: 100svh;
        height: auto;
        display: flex;
        flex-direction: column;
        background: linear-gradient(180deg, rgba(238,243,251,.6), transparent 65%);
      }

      /* FOTO: altura estable y sin franjas */
      .photo-side{
        height: 38vh;           /* ajusta 34–44vh si lo quieres más/menos alto */
        min-height: 240px;
        max-height: 420px;
        overflow: hidden;
      }
      .photo-side::before{
        background-repeat: no-repeat;
        background-size: cover;
        background-position: center;
        transform: scale(1.08); /* leve zoom para cubrir bordes */
      }
      .photo-wrap{
        width: 100%;
        height: 100%;
      }
      .photo-wrap img{
        width: 100%;
        height: 100%;
        object-fit: cover;      /* llena sin barras */
        object-position: center;
      }

      /* TEXTO: scroll sólo aquí, padding compacto */
      .text-side{
        flex: 1;
        height: auto;
        overflow: auto;
        padding: 16px;
        box-shadow: none;
        border-left: none !important;
      }

      /* Título del carrusel más cerca y sin translate */
      .hero-copy{ padding-top: 8px; }
      .carousel-title{
        margin-top: 8px !important;
        transform: none;
      }

      /* Carrusel estable en móvil */
      .carousel{
        margin-top: 12px;
      }
      .carousel-track{
        aspect-ratio: 16 / 9;   /* más estable en móvil que 21:9 */
        min-height: 180px;
        max-height: none;
      }

      /* Legal: ancho disponible sin escala */
      .hero-legal{
        left: 10px;
        right: 10px;
        transform: none !important;
      }
    }

    /* ===================== FIX HAMBURGUER SOLO MÓVIL ===================== */
    @media (max-width: 960px){
      .menu-toggle{
        z-index: 260; /* por encima del sidebar (200) */
        left: max(10px, calc(env(safe-area-inset-left, 0px) + 10px));
        top:  max(10px, calc(env(safe-area-inset-top, 0px) + 10px));
      }
      /* Cuando el sidebar está abierto, corre el botón a la derecha del sidebar */
      body.sb-open .menu-toggle{
        left: calc(var(--sb-w) + 18px); /* separadito del borde */
      }
    }

    /* ======== Mejoras de legibilidad específicas para el welcome ======== */
    #welcomeModal .modal-body{
      font-size:16px; line-height:1.45;
      color: color-mix(in srgb, var(--text) 92%, #000 8%);
    }
    #welcomeModal #welcomeUser{
      color: color-mix(in srgb, var(--primary) 88%, var(--text) 12%);
    }

    /* ======== Versión B: Frosted Edge MÁS MARCADO (contorno + halo) ======== */
    #welcomeModal .modal{
      position: relative;
      isolation: isolate;
      background: color-mix(in srgb, var(--panel) 94%, #ffffff 6%);
      border: 1px solid color-mix(in srgb, var(--line) 70%, transparent);
      box-shadow:
        0 52px 160px rgba(0,0,0,.70),
        0 28px 72px rgba(0,0,0,.34),
        0 0 0 1px color-mix(in srgb, var(--primary) 16%, transparent);
    }
    #welcomeModal .modal::before{
      content:"";
      position:absolute; inset:-18px;           /* anillo más ancho */
      border-radius:24px;                       /* contorno más suave */
      backdrop-filter: blur(16px) saturate(130%);
      -webkit-backdrop-filter: blur(16px) saturate(130%);
      background:
        radial-gradient(60% 70% at 50% 10%, rgba(255,255,255,.46), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,.20), rgba(255,255,255,.04));
      box-shadow:
        0 0 0 1.4px rgba(255,255,255,.45) inset,
        0 0 64px color-mix(in srgb, var(--primary) 38%, transparent);  /* halo más notorio */
      z-index:-1; pointer-events:none;
    }
    #welcomeModal .modal::after{
      content:"";
      position:absolute; inset:-1px; border-radius:16px;
      background: linear-gradient(180deg,
                  color-mix(in srgb, var(--primary) 48%, transparent),
                  color-mix(in srgb, var(--primary) 10%, transparent));
      opacity:.50;                               /* brillo más marcado */
      mix-blend-mode: screen; pointer-events:none;
    }
    html[data-theme="dark"] #welcomeModal .modal{
      box-shadow:
        0 60px 180px rgba(0,0,0,.80),
        0 32px 80px rgba(0,0,0,.46),
        0 0 0 1px color-mix(in srgb, var(--primary) 22%, transparent);
    }

    /* ======== Versión B: Botón Entrar full-width en móvil ======== */
    @media (max-width: 600px){
      #welcomeModal .modal-footer{ padding: 12px 16px; justify-content: center; }
      #welcomeModal .btn.primary{
        width: 100%;
        justify-content: center;
        font-weight: 600;
        padding: 12px 14px;
      }
      #welcomeModal .modal-body h2{
        font-size: 20px;
      }
    }
  </style>
</head>
<body>

  <!-- Botón menú (móvil) -->
  <button class="menu-toggle" id="btnMenu" aria-label="Abrir menú">
    <svg viewBox="0 0 24 24" aria-hidden="true">
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </button>

  <!-- ======= SIDEBAR ======= -->
  <aside class="sidebar" id="sidebar" aria-label="Menú lateral">
    <div>
      <div class="sb-brand">
        <div class="sb-logo" title="DOMINION">
          <img src="dominion_logo.png" alt="DOMINION logo">
        </div>
        <div class="sb-title">
          <strong>MinTIC</strong>
          <small>Centros Digitales</small>
        </div>
      </div>

      <div class="sb-section-title">Navegación</div>
      <nav class="sb-nav">

        <a class="sb-item" href="main_page.html">
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <line x1="4" y1="12" x2="20" y2="12"></line>
            <polyline points="13 5 20 12 13 19"></polyline>
          </svg>
          <span>Entrar</span>
        </a>

        <a class="sb-item" href="PBI.html">
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <path class="fill" d="M4 13.5a2 2 0 1 1 4 0V18a2 2 0 1 1-4 0v-4.5Zm5-3a2 2 0 1 1 4 0V18a2 2 0 1 1-4 0V10.5Zm5-2A2 2 0 1 1 19 8v10a2 2 0 1 1-4 0V8.5Z"></path>
          </svg>
          <span>Dashboard</span>
        </a>

        <a class="sb-item" href="inventario_centros_digitales.html">
          <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <rect x="3" y="4" width="18" height="16" rx="2" ry="2"></rect>
            <line x1="3" y1="10" x2="21" y2="10"></line>
            <line x1="3" y1="15" x2="21" y2="15"></line>
            <rect x="6" y="6" width="4" height="3"></rect>
            <rect x="12" y="6" width="6" height="3"></rect>
            <rect x="6" y="11" width="6" height="3"></rect>
            <rect x="13" y="16" width="5" height="3"></rect>
          </svg>
          <span>Hoja de vida CDs</span>
        </a>

        <a class="sb-item" href="#ayuda" id="btnAyuda">
          <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <circle cx="12" cy="12" r="9"></circle>
            <path d="M9.5 9.25c.2-1.35 1.35-2.25 2.85-2.25 1.65 0 2.9 1 2.9 2.5 0 1.2-.7 1.9-1.8 2.5-.9.5-1.4 1-1.5 1.8v.4"></path>
            <circle cx="12" cy="16.2" r="1" class="fill"></circle>
          </svg>
          <span>Ayuda</span>
        </a>

        <a class="sb-item" href="#acerca">
          <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <circle cx="12" cy="12" r="9"></circle>
            <line x1="12" y1="8" x2="12" y2="13"></line>
            <circle cx="12" cy="16" r="1.2" class="fill"></circle>
          </svg>
          <span>Acerca del programa</span>
        </a>

        <!-- >>> NUEVO: MANUALES como ÚLTIMO ÍTEM DEL MENÚ <<< -->
        <a class="sb-item" href="manuales.html">
          <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <!-- Ícono libro/manual -->
            <path d="M4.5 5.5A2.5 2.5 0 0 1 7 3h11a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1H7a2.5 2.5 0 0 1-2.5-2.5V5.5Z"></path>
            <path d="M7 3v14.5"></path>
            <line x1="10" y1="7" x2="16" y2="7"></line>
            <line x1="10" y1="10" x2="16" y2="10"></line>
            <line x1="10" y1="13" x2="14" y2="13"></line>
          </svg>
          <span>Manuales</span>
        </a>
        <!-- <<< FIN NUEVO ÍTEM >>> -->

      </nav>
    </div>

    <!-- ===== Footer con Cerrar sesión + Tema ===== -->
    <div class="sb-footer">
      <button class="btn-logout" id="btnLogout" type="button" title="Cerrar sesión y volver al inicio de sesión">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <!-- icono salida -->
          <path d="M10 12h8"></path>
          <polyline points="15 7 20 12 15 17"></polyline>
          <path d="M14 3H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8"></path>
        </svg>
        <span>Cerrar sesión</span>
      </button>

      <!-- Tema -->
      <button class="btn-theme" id="btnTheme" type="button" title="Cambiar tema">
        <span id="btnThemeText">Tema: Claro</span>
      </button>
    </div>
    <!-- ===== /Footer ===== -->
  </aside>

  <!-- ======= HERO FULLSCREEN ======= -->
  <section class="hero" aria-label="Héroe a pantalla completa">
    <!-- Columna imagen -->
    <div class="photo-side">
      <div class="photo-wrap">
        <img src="dominion.jpg" alt="Imagen institucional DOMINION">
      </div>
    </div>

    <!-- Columna texto -->
    <div class="text-side">
      <div class="hero-copy">
        <div class="super-title"><span class="dot"></span> INGENIERÍA • CONECTIVIDAD • SERVICIO</div>
        <h1 class="title-main">Seguimiento O&M proyecto MinTIC</h1>
        <p class="lead">
          Sistema integral operativo, consulta detalles KPIs, backlog y
          hoja de vida de cada Centro Digital.
        </p>

        <div class="carousel-title">Acercamiento a la comunidad</div>

        <div class="carousel" id="cdCarousel" aria-label="Galería de imágenes">
          <button class="carousel-btn prev" id="cPrev" aria-label="Anterior">
            <svg viewBox="0 0 24 24" aria-hidden="true"><polyline points="15 6 9 12 15 18"></polyline></svg>
          </button>
          <div class="carousel-track" id="cTrack" role="list"></div>
          <button class="carousel-btn next" id="cNext" aria-label="Siguiente">
            <svg viewBox="0 0 24 24" aria-hidden="true"><polyline points="9 6 15 12 9 18"></polyline></svg>
          </button>
        </div>
      </div>

      <div class="hero-legal" id="heroLegal">
        © 2026 DOMINION — Todos los derechos reservados — WEB desarrollada por Ariel Márquez Rada
      </div>
    </div>
  </section>

  <!-- ===== Modal Ayuda ===== -->
  <div class="modal-backdrop" id="helpBackdrop" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="helpTitle" id="helpModal">
      <div class="modal-header">
        <div class="modal-title" id="helpTitle" tabindex="-1"><span>Ayuda</span></div>
        <button class="btn" id="helpClose" aria-label="Cerrar Ayuda">Cerrar</button>
      </div>
      <div class="modal-body" id="helpContent">
        <p><strong>Bienvenido al centro de ayuda de Seguimiento O&M.</strong></p>
        <ul>
          <li><strong>Dashboard:</strong> visualiza KPIs y estados en <em>Dashboard O&M</em>.</li>
          <li><strong>Hoja de vida CDs:</strong> consulta el detalle por Centro Digital, última visita, estado actual entre otros en <em>Hoja de vida CDs</em>.</li>
          <li><strong>Modo claro/oscuro:</strong> usa el botón al final del menú lateral.</li>
          <li><strong>Soporte:</strong> ariel.marquez-ext@dominion-global.com.</li>
        </ul>
        <p><em>© 2026 DOMINION — Todos los derechos reservados — WEB desarrollada por Ariel Márquez Rada</em>.</p>
      </div>
      <div class="modal-footer">
        <button class="btn" id="helpBackdropClose">Cerrar</button>
        <a class="btn primary" href="ayuda.html">Ver ayuda completa</a>
      </div>
    </div>
  </div>

  <!-- ===== NUEVO: Modal Bienvenida (solo 1 vez por sesión) ===== -->
  <div class="modal-backdrop" id="welcomeBackdrop" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="welcomeTitle" id="welcomeModal">
      <!-- SIN HEADER: Título dentro del body para evitar la “línea” -->
      <div class="modal-body" id="welcomeContent">
        <h2 style="margin:0 0 12px 0; font-size:20px; font-weight:600;">Bienvenido</h2>
        <p style="margin:0; font-size:16px; color:var(--muted)">
          Hola <strong id="welcomeUser">usuario</strong>, estás ingresando al sistema de Seguimiento O&M.
        </p>
      </div>
      <div class="modal-footer">
        <button class="btn primary" id="welcomeContinue">Entrar</button>
      </div>
    </div>
  </div>
  <!-- ===== /Modal Bienvenida ===== -->

  <!-- ===== Toggle Tema + Sidebar + Auto-fit Legal + Modal Ayuda + Logout + Bienvenida ===== -->
  <script>
    // ===== Toggle de tema (Claro/Oscuro) =====
    (function(){
      const themeKey = 'landing_theme';
      const docEl = document.documentElement;
      const body  = document.body;
      const btn   = document.getElementById('btnTheme');
      const lbl   = document.getElementById('btnThemeText');

      function applyLabel(mode){
        if (lbl) lbl.textContent = 'Tema: ' + (mode === 'dark' ? 'Oscuro' : 'Claro');
      }
      function setMode(mode){
        docEl.setAttribute('data-theme', mode);
        body.classList.toggle('theme-dark', mode==='dark');
        localStorage.setItem(themeKey, mode);
        applyLabel(mode);
      }
      (function initTheme(){
        const saved = localStorage.getItem(themeKey);
        const theInitial = saved || docEl.getAttribute('data-theme') || 'light';
        setMode(theInitial);
      })();
      if (btn){
        btn.addEventListener('click', () => {
          const cur  = (docEl.getAttribute('data-theme')==='dark') ? 'dark' : 'light';
          const next = (cur==='dark') ? 'light' : 'dark';
          setMode(next);
          if (typeof fitLegal === 'function') setTimeout(fitLegal, 0);
        });
      }
    })();

    // ===== Toggle del Sidebar en móviles =====
    (function(){
      const btnMenu = document.getElementById('btnMenu');
      if (btnMenu){
        btnMenu.addEventListener('click', ()=>{
          document.body.classList.toggle('sb-open');
          setTimeout(()=>{ if (typeof fitLegal==='function') fitLegal(); }, 260);
        });
      }
    })();

    // ===== Auto-fit del texto legal =====
    function fitLegal(){
      const legal = document.getElementById('heroLegal');
      const col   = document.querySelector('.text-side');
      if(!legal || !col) return;

      legal.style.transform = 'translateX(-50%) scale(1)';

      const cs = getComputedStyle(col);
      const padL = parseFloat(cs.paddingLeft) || 0;
      const padR = parseFloat(cs.paddingRight) || 0;
      const available = col.clientWidth - padL - padR - 6;

      const needed = legal.scrollWidth;
      let scale = 1;
      if (needed > available) scale = available / needed;
      scale = Math.min(1, Math.max(0.7, scale));

      legal.style.transformOrigin = 'bottom center';
      legal.style.transform = `translateX(-50%) scale(${scale})`;
    }
    window.addEventListener('load', fitLegal);
    window.addEventListener('resize', fitLegal);
    window.addEventListener('orientationchange', () => setTimeout(fitLegal, 200));

    // ===== Modal Ayuda =====
    (function(){
      const openBtn   = document.getElementById('btnAyuda');
      const backdrop  = document.getElementById('helpBackdrop');
      const modal     = document.getElementById('helpModal');
      const closeBtn  = document.getElementById('helpClose');
      const closeBtn2 = document.getElementById('helpBackdropClose');

      let lastFocused = null;

      function openModal(e){
        if (e) e.preventDefault();
        lastFocused = document.activeElement;
        backdrop.classList.add('open');
        backdrop.removeAttribute('aria-hidden');
        const title = document.getElementById('helpTitle');
        setTimeout(()=> title?.focus?.(), 10);
      }
      function closeModal(){
        backdrop.classList.remove('open');
        backdrop.setAttribute('aria-hidden', 'true');
        lastFocused?.focus?.();
      }
      backdrop.addEventListener('click', (ev)=>{ if (ev.target === backdrop) closeModal(); });
      closeBtn?.addEventListener('click', closeModal);
      closeBtn2?.addEventListener('click', closeModal);
      document.addEventListener('keydown', (ev)=>{ if (backdrop.classList.contains('open') && ev.key === 'Escape') closeModal(); });
      openBtn?.addEventListener('click', openModal);
    })();

    /* ===== CARRUSEL: crossfade + blur, autoplay 7s, fondo blur dinámico ===== */
    (function(){
      const track = document.getElementById('cTrack');
      const prev  = document.getElementById('cPrev');
      const next  = document.getElementById('cNext');
      if (!track) return;

      const MAX_TRY = 40;
      const AUTOPLAY_MS = 7000;
      const baseOk   = (i)=> `miniatura${i}.jpg`;
      const baseTypo = (i)=> `minuatira${i}.jpg`;

      function probe(src){
        return new Promise((resolve) => {
          const img = new Image();
          img.onload  = () => resolve({exists:true, src});
          img.onerror = () => resolve({exists:false, src});
          img.src = src + `?v=${Date.now().toString(36)}`;
        });
      }

      (async function loadImages(){
        const found = [];
        const firstOk = await probe(baseOk(1));
        if (firstOk.exists){
          found.push(firstOk.src);
          for (let i=2; i<=MAX_TRY; i++){
            const r = await probe(baseOk(i)); if (!r.exists) break; found.push(r.src);
          }
        } else {
          const firstTypo = await probe(baseTypo(1));
          if (firstTypo.exists){
            found.push(firstTypo.src);
            for (let i=2; i<=MAX_TRY; i++){
              const r = await probe(baseTypo(i)); if (!r.exists) break; found.push(r.src);
            }
          }
        }

        if (found.length === 0){
          const empty = document.createElement('div');
          empty.className = 'carousel-empty';
          empty.textContent = 'No se encontraron imágenes miniaturaN.jpg en la carpeta.';
          track.appendChild(empty);
          prev && (prev.style.display='none'); next && (next.style.display='none');
          if (typeof fitLegal === 'function') setTimeout(fitLegal, 0);
          return;
        }

        const items = found.map((src, idx) => {
          const item = document.createElement('div');
          item.className = 'carousel-item' + (idx===0 ? ' is-active' : '');
          item.setAttribute('role','listitem');
          item.style.setProperty('--slide-img', `url("${src}")`);
          const img = document.createElement('img');
          img.loading = 'lazy'; img.decoding = 'async'; img.alt = `Imagen ${idx+1}`; img.src = src;
          item.appendChild(img); track.appendChild(item);
          return item;
        });

        let current = 0;
        let isAnimating = false;

        function armTransitionUnlock(nextItem){
          const onEnd = (ev)=>{
            if (ev.propertyName === 'opacity' || ev.propertyName === 'transform' || ev.propertyName === 'filter'){
              nextItem.removeEventListener('transitionend', onEnd);
              isAnimating = false;
            }
          };
          nextItem.addEventListener('transitionend', onEnd, {once:false});
          setTimeout(()=>{ isAnimating = false; }, 900);
        }

        function show(index){
          const total = items.length; if (total < 2 || isAnimating) return;
          const nextIndex = (index + total) % total; if (nextIndex === current) return;
          const curItem = items[current]; const nextItem = items[nextIndex];
          isAnimating = true; nextItem.classList.add('is-active'); armTransitionUnlock(nextItem);
          curItem.classList.remove('is-active'); current = nextIndex;
        }

        function goPrev(){ show(current - 1); }
        function goNext(){ show(current + 1); }

        if (items.length < 2){ prev && (prev.style.display='none'); next && (next.style.display='none'); }
        else { prev?.addEventListener('click', goPrev); next?.addEventListener('click', goNext); }

        track.setAttribute('tabindex','0');
        track.addEventListener('keydown', (ev)=>{ if (ev.key==='ArrowLeft') goPrev(); if (ev.key==='ArrowRight') goNext(); });

        let startX=null, startY=null;
        track.addEventListener('touchstart', (e)=>{ const t=e.touches?.[0]; if(!t) return; startX=t.clientX; startY=t.clientY; }, {passive:true});
        track.addEventListener('touchend', (e)=>{ const t=e.changedTouches?.[0]; if(!t||startX===null||startY===null) return;
          const dx=t.clientX-startX, dy=t.clientY-startY;
          if (Math.abs(dx)>Math.abs(dy) && Math.abs(dx)>30){ if (dx>0) goPrev(); else goNext(); }
          startX=startY=null;
        }, {passive:true});

        let autoplayId = null;
        function startAutoplay(){ if (autoplayId || items.length<2) return; autoplayId = setInterval(goNext, AUTOPLAY_MS); }
        function stopAutoplay(){ if (!autoplayId) return; clearInterval(autoplayId); autoplayId=null; }
        startAutoplay();
        document.addEventListener('visibilitychange', () =>{ if (document.hidden) stopAutoplay(); else startAutoplay(); });

        if (typeof fitLegal === 'function') setTimeout(fitLegal, 0);
      })();
    })();

    // ===== Cerrar sesión (ARREGLADO) =====
    (function(){
      const btnLogout = document.getElementById('btnLogout');
      if (!btnLogout) return;
      btnLogout.addEventListener('click', () => {
        try {
          sessionStorage.removeItem('auth_ok');
          sessionStorage.removeItem('auth_user');
          sessionStorage.removeItem('auth_role');
          // Opcional: también borrar el tema
          // localStorage.removeItem('landing_theme');
        } catch(e){}
        window.location.replace('login.html');
      });
    })();

    // ===== Bienvenida (se muestra 1 vez por sesión) =====
    (function(){
      const backdrop = document.getElementById('welcomeBackdrop');
      const modal    = document.getElementById('welcomeModal');
      const nameEl   = document.getElementById('welcomeUser');
      const btnGo    = document.getElementById('welcomeContinue');

      if (!backdrop || !modal) return;

      const isAuth = !!sessionStorage.getItem('auth_ok');
      const already = sessionStorage.getItem('welcome_shown') === '1';

      if (isAuth && !already) {
        const user = (sessionStorage.getItem('auth_user') || 'usuario').trim();
        if (nameEl) nameEl.textContent = user;

        // Abrir
        backdrop.classList.add('open');
        backdrop.removeAttribute('aria-hidden');

        function closeWelcome(){
          backdrop.classList.remove('open');
          backdrop.setAttribute('aria-hidden','true');
          sessionStorage.setItem('welcome_shown','1');
        }

        btnGo?.addEventListener('click', closeWelcome);
        backdrop.addEventListener('click', (ev)=>{ if (ev.target === backdrop) closeWelcome(); });
        document.addEventListener('keydown', (ev)=>{ if (backdrop.classList.contains('open') && ev.key === 'Escape') closeWelcome(); });
      }
    })();
  </script>
</body>
</html>